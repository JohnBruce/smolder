#!/usr/bin/perl

use strict;
use warnings;

=head1 NAME

smolder_info - gives a quick summary of the Smolder installation

=head1 SYNOPSIS

To find out the version, and other misc information about a Smolder
installation.

  bin/smolder_info

=head1 DESCRIPTION

This script returns a quick summary of the Smolder installation - which
version of Smolder, etc.

=head1 OPTIONS

None at this time.

=cut

use File::Spec::Functions qw(catdir catfile splitdir rel2abs canonpath);
use FindBin qw($RealBin);
use Config;

BEGIN {

    # Find a SMOLDER_ROOT based on path to bin
    my @dir = splitdir( canonpath($RealBin) );
    $ENV{SMOLDER_ROOT} ||= catdir( @dir[ 0 .. $#dir - 1 ] );

    # use SMOLDER_ROOT/lib for modules
    my $lib = catdir( $ENV{SMOLDER_ROOT}, "lib" );
    $ENV{PERL5LIB} =
      $ENV{PERL5LIB}
      ? "$ENV{PERL5LIB}:${lib}"
      : "${lib}";
    unshift @INC, $lib, "$lib/" . $Config{archname};

    # load Smolder::Conf
    eval { require Smolder::Conf };
    warn << "END" and exit(1) if $@;
######################################################################

Cannot load Smolder.

Error message:

$@

######################################################################
END
}

use Smolder;
my $version = $Smolder::VERSION;

print STDOUT<<END;

######################################################################

Smolder Version:\t\t$version

######################################################################

END

exit;
