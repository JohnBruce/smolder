[% SET page_title = 'Preferences' %]

<div class="sub_menu">
    <a class="sub_menu" href="/app/developer_prefs/change_pw">Change Password</a>
</div>

<div id="developer_prefs">
<form class="ajaxable for_developer_prefs show_pref_indicator" id="update_pref" name="update_pref" action="/app/developer_prefs/update_pref" method="post">
<input type="hidden" name="sync" value="0" />
<input type="hidden" name="default_pref_id" value="[% c.developer.preference.id %]" />

[% IF success %]
  <p class="warn">
    Preferences successfully updated.
  </p>
[% END %]
[% IF default && sync_success %]
  <p class="warn">
    All project preferences have been synced.
  </p>
[% END %]
[% PROCESS form_header.tmpl %]

<table>
<tr>
  <td><label>Project</label>
  <td>
    <select name="preference" class="hl" id="project_preference_selector">
     <option value="[% c.developer.preference.id %]">My Defaults</option>
     [% FOREACH project IN c.developer.projects %]
     <option value="[% c.developer.project.pref(project).id %]">[% project.name | html %]</option>
     [% END %]
    </select>
  </td>
</tr>
<tr>
  <td><label class="required">Email Type *</td>
  <td>
    <select name="email_type" class="hl">
      <option value="full">Full HTML Report</option>
      <option value="summary">Summary of Pass/Fail/Skip</option>
      <option value="link">A Link to the Full Report</option>
    </select>
  </td>
</tr>
<tr>
  <td><label class="required">Email Frequency *</td>
  <td>
    <select name="email_freq" class="hl">
      <option value="on_new">Everytime a new Test Report is Added </option>
      <option value="on_fail">Only when a new Test Report has Failures</option>
      <option value="never">Never</option>
    </select>
  </td>
</tr>
<tr>
  <td><label class="required">Per-day Email Limit *</td>
  <td>
    <input name="email_limit" class="hl" value="[% pref.email_limit %]" size="5"/>
    <em>0</em> means there is no limit
  </td>
</tr>
<tr>
  <td colspan="2" align="right">
    <img src="[% c.static_url('/images/indicator.gif') %]" style="display:none" class="indicator" id="pref_indicator_[% pref.id %]" alt="loading" />
    <input type="submit" value="Update" />
    [% IF default %]
    <input type="button" value="Sync All Projects" id="dev_prefs_sync_button" />
    [% END %]
  </td>
</tr>
</table>
</form>
</div>

